---
title: "V-dem analysis"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Packages
```{r}
pacman::p_load(dplyr, haven, stringr, ggplot2)
```

# Load Data

```{r}
load(url("https://github.com/favstats/database_delib/raw/master/vdems_start.Rdata"))

#glimpse(vdem_spss)
vdem <- vdems_start %>%
  select(
    country_name, country_id, 
    country_text_id, year, 
    v2clkill, e_regionpol
  ) %>%
  rename(
    cname = country_name, 
    cid = country_id, 
    ctid = country_text_id,
    pkill = v2clkill,
    pregion = e_regionpol
  )

glimpse(vdem)

vdem %>%
  group_by(year) %>%
  summarise(mkill = mean(pkill, na.rm = T)) %>%
  ggplot(aes(year, mkill)) +
  geom_line()

vdem %>%
  #filter(cname %in% c("Germany", "Syria")) %>%
  group_by(pregion, year) %>%
  summarise(mkill = mean(pkill, na.rm = T)) %>%
  ggplot(aes(year, mkill, colour = as.factor(pregion))) +
  geom_line() +
  geom_smooth(method = "lm", color = "red")
  theme(legend.position = "bottom")
```

```{r}
alliances <- readr::read_csv("data/API_MS.MIL.XPRT.KD_DS2_en_csv_v2.csv")
glimpse(alliances)

max(alliances$year)
#table(alliances$)
#%>% 
  filter(year > 1900)
  
Lines <- readLines("data/Trade-Register-1950-2016.rtf")
Lines[1:100]

# devtools::install_github("kota7/striprtf")
library(striprtf)

```


